## ECS/Fargate chosen over EKS to reduce operational overhead

- No cluster infrastructure to manage.  
- AWS fully manages the underlying compute.  
- ECS usas native AWS IAM roles, no need to manage Kubernetes RBAC, Service accounts,...  
- ECS integrates directly with CloudWatch, ALBs, Auto Scaling, Secrets Manager.  
- WordPress is a long running web application, not a complex microservices platform.  
- ECS include heatchchecks, rolling deployments.  
- EKS has a fixed control plane cost and ECS charge only for running tasks and avoid paid for idle nodes.  

## Avoiding NAT Gateway minimizes fixed monthly cost

- A NAT Gateway introduce a fixed baseline cost that exists even when the system is idle.  
- The pricing for a NAT Gateway include hourly charge and data processing cost per GB.  
- Even with zero traffic, the hourly charge applies.  
- ECS can run in public subnets and have public IP addresses.  
- Outbound internet access (image pulls, wordpress updates) works via the Internet Gateway without NAT.  
- Tasks do not accept public traffic.  
- Security groups allow inbound only from the ALB.  
- A NAT Gateway would be justified if workload run in private subnets, compliance mandates no Public IPs, etc.  

## Aurora Serverless v2 avoids always-on database instances
- Tradictional RDS database instance are always running, so you pay for a fixed instance.  
- Aurora ServerLess v2 uses Aurora Capacity Units (ACUs), capacity scales up and dows automatically.  
- No instance resizing, restarts or manual intervention.  
- At low traffic, the database consumes fractional ACUs.  
- For workloads like WordPress where traffic can vary significantly the database adapt automatically.  



## EFS is required for horizontally scaling WordPress
- WordPress is not stateless by default.  
- WordPress stores runtime state on the filesystem, which creates a challenge when running multiples instances.  
- By default WordPress stores: media uploads, pluging files, theme files, cache files.  
- Each ECS task has its own ephemeral filesystem, when a task is restarted or scales local files are lost.  
- Horizontal scaling requires shared and concurrent file access.  
- Database alone is not sufficient, media files and executable PHP files are not stored in the database.  
- EFS can be mounted directly into Fargate tasks.  
    
## Spot capacity improves cost efficiency for variable load
- Spot pricing is 60-70% cheaper that on-demand pricing.  
- There is no long term commitment.  
- In this architecture ECS tasks are stateless, tasks can be stopped and replaced automatically.  
- If Spot tasks is interrupted ECS schedules a replacement task, traffic is redistributed by the ALB, the system remains available.  
- Spot is not appropiate for Staeful workloads without external persistence, latency-critical systems, etc.  
